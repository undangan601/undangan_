<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Undangan ‚Äî Devano & Bernike (v2.5)</title>

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg: #060606;
        --card: #0f0f10;
        --muted: #cfc6be;
        --accent: #d9b77e;
        --accent-2: rgba(217, 183, 126, 0.14);
        --glass: rgba(255, 255, 255, 0.03);
        --radius: 18px;
        --max-width: 820px;
        font-family: "Inter", system-ui;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: radial-gradient(
            1000px 400px at 10% 10%,
            rgba(217, 183, 126, 0.03),
            transparent 6%
          ),
          linear-gradient(180deg, #030303 0%, #060606 100%);
        color: var(--muted);
        display: flex;
        align-items: flex-start;
        justify-content: center;
        padding: 18px;
      }
      .wrap {
        width: 100%;
        max-width: var(--max-width);
        border-radius: 22px;
        overflow: hidden;
        box-shadow: 0 18px 60px rgba(0, 0, 0, 0.7);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.01),
          rgba(255, 255, 255, 0.005)
        );
        position: relative;
      }

      /* SPLASH */
      .splash {
        position: fixed;
        inset: 0;
        background: linear-gradient(
          180deg,
          rgba(3, 3, 3, 0.96),
          rgba(6, 6, 6, 0.92)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 120;
        flex-direction: column;
        gap: 14px;
        transition: opacity 0.6s ease, visibility 0.6s;
      }
      .splash.hidden {
        opacity: 0;
        visibility: hidden;
      }
      .splash .logo {
        width: 120px;
        height: 120px;
        border-radius: 999px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(
          180deg,
          rgba(217, 183, 126, 0.12),
          rgba(255, 255, 255, 0.01)
        );
        border: 1px solid rgba(217, 183, 126, 0.18);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
        font-family: "Playfair Display", serif;
        color: var(--accent);
        font-size: 34px;
      }
      .splash h2 {
        margin: 0;
        color: var(--muted);
        font-family: "Playfair Display";
      }
      .splash p {
        margin: 0;
        font-size: 13px;
        color: rgba(207, 198, 189, 0.9);
      }

      #particles {
        position: absolute;
        inset: 0;
        z-index: 0;
        pointer-events: none;
        opacity: 0.9;
      }

      header.hero {
        position: relative;
        z-index: 1;
        padding: 26px 18px;
        display: flex;
        gap: 16px;
        align-items: center;
        background: linear-gradient(
          180deg,
          rgba(217, 183, 126, 0.03),
          rgba(0, 0, 0, 0.02)
        );
        border-bottom: 1px solid rgba(255, 255, 255, 0.02);
      }
      .hero .left {
        flex: 1;
      }
      .names {
        font-family: "Playfair Display", serif;
        font-size: 26px;
        color: var(--accent);
        margin: 0 0 6px 0;
      }
      .subtitle {
        font-size: 13px;
        color: var(--muted);
        margin: 0;
      }
      .date-badge {
        min-width: 104px;
        text-align: center;
        padding: 10px 12px;
        border-radius: 12px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          rgba(0, 0, 0, 0.02)
        );
        border: 1px solid rgba(217, 183, 126, 0.08);
      }
      .date-badge .day {
        font-size: 20px;
        color: #fff;
        font-weight: 700;
      }
      .date-badge .month {
        font-size: 11px;
        color: var(--muted);
      }

      main.content {
        padding: 18px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        position: relative;
        z-index: 1;
      }

      .section {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.01),
          rgba(0, 0, 0, 0.02)
        );
        border-radius: 14px;
        padding: 14px;
        border: 1px solid rgba(255, 255, 255, 0.02);
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.5);
      }

      h3 {
        margin: 0 0 8px 0;
        color: #fff;
        font-family: "Playfair Display", serif;
      }
      p {
        margin: 0;
        font-size: 14px;
        color: var(--muted);
      }
      .divider {
        text-align: center;
        margin: 12px 0;
        color: var(--accent-2);
        font-size: 12px;
      }

      .countdown {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }
      .countdown .box {
        flex: 1;
        text-align: center;
        padding: 12px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.01);
        border: 1px solid rgba(217, 183, 126, 0.05);
      }
      .num {
        font-size: 18px;
        color: #fff;
        font-weight: 700;
      }
      .lbl {
        font-size: 12px;
        color: var(--muted);
        margin-top: 6px;
      }

      .actions {
        display: flex;
        gap: 8px;
        margin-top: 12px;
        flex-wrap: wrap;
      }

      .btn {
        flex: 1;
        min-width: 120px;
        padding: 12px 10px;
        border-radius: 12px;
        border: none;
        cursor: pointer;
        font-weight: 700;
        text-align: center;
        font-size: 14px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.45);
      }
      .btn.gold {
        background: linear-gradient(90deg, #e6c98b, #d9b77e);
        color: #111;
      }
      .btn.ghost {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.06);
        color: var(--muted);
      }

      form.rsvp {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      input,
      textarea,
      select {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.06);
        padding: 12px;
        border-radius: 10px;
        color: var(--muted);
        font-size: 14px;
      }

      .fab {
        position: fixed;
        left: 50%;
        transform: translateX(-50%);
        bottom: 14px;
        z-index: 110;
        display: flex;
        gap: 10px;
        padding: 8px;
        border-radius: 999px;
        background: rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(6px);
      }
      .fab button {
        padding: 8px 12px;
        border: none;
        background: transparent;
        color: var(--muted);
        font-weight: 700;
        border-radius: 999px;
      }
      .fab .accent {
        color: var(--accent);
      }

      /* music button specific */
      #playMusicBtn {
        font-size: 16px;
        padding: 8px 12px;
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.04);
      }

      /* reveal */
      .reveal {
        opacity: 0;
        transform: translateY(12px);
        transition: opacity 0.6s, transform 0.6s;
      }
      .reveal.visible {
        opacity: 1;
        transform: none;
      }
    </style>
  </head>

  <body>
    <canvas id="particles"></canvas>

    <div class="splash" id="splash">
      <div class="logo">D ‚ô• B</div>
      <h2>Devano &amp; Bernike</h2>
      <p>22 November 2025</p>
    </div>

    <div class="wrap">
      <header class="hero">
        <div class="left">
          <h1 class="names">Devano &amp; Bernike</h1>
          <p class="subtitle">
            Dengan penuh sukacita kami mengundang Bapak/Ibu/Saudara/i menghadiri
            acara kami.
          </p>
        </div>
        <div class="date-badge">
          <div class="day">22</div>
          <div class="month">Nov 2025</div>
        </div>
      </header>

      <main class="content">
        <section class="section reveal">
          <h3>Rangkaian Acara</h3>
          <div class="divider">‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ ‚ú¶ ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ</div>

          <p><strong>Pemberkatan</strong></p>
          <p style="color: #fff; font-weight: 700; margin: 6px 0 10px">
            09:00 WIB ‚Äî GPIB ATK, Gereja ‚Äî Sektor TambakRejo
          </p>

          <p><strong>Syukuran</strong></p>
          <p style="color: #fff; font-weight: 700; margin: 6px 0 10px">
            13:00 WIB ‚Äî Dusun Bejalan Timur RT 09 RW 04
          </p>

          <div class="countdown">
            <div class="box">
              <div class="num" id="cd-days">--</div>
              <div class="lbl">Hari</div>
            </div>
            <div class="box">
              <div class="num" id="cd-hours">--</div>
              <div class="lbl">Jam</div>
            </div>
            <div class="box">
              <div class="num" id="cd-minutes">--</div>
              <div class="lbl">Menit</div>
            </div>
          </div>

          <div class="actions">
            <button class="btn gold" id="addIcs">Tambahkan ke Kalender</button>
            <button class="btn ghost" id="addGCal">
              Tambahkan ke Google Calendar
            </button>
            <button class="btn ghost" id="openMapsCeremony">
              Maps Pemberkatan
            </button>
            <button class="btn ghost" id="openMapsReception">
              Maps Syukuran
            </button>
          </div>
        </section>

        <section class="section reveal">
          <h3>RSVP Kehadiran</h3>
          <div class="divider">‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ ‚ú¶ ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ</div>

          <form class="rsvp" id="rsvpForm">
            <input
              id="name"
              type="text"
              placeholder="Nama lengkap *"
              required
            />
            <input id="phone" type="tel" placeholder="Nomor WhatsApp *" />
            <select id="attend">
              <option value="Hadir">Hadir</option>
              <option value="Tidak Hadir">Tidak Hadir</option>
              <option value="Mungkin">Mungkin</option>
            </select>
            <textarea
              id="note"
              rows="3"
              placeholder="Catatan (opsional)"
            ></textarea>

            <button type="button" class="btn gold" id="sendWA">
              Kirim via WhatsApp
            </button>
            <button type="button" class="btn ghost" id="saveLocal">
              Simpan
            </button>
          </form>
        </section>

        <section class="section reveal" id="lokasi">
          <h3>Lokasi & Kontak</h3>
          <div class="divider">‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ ‚ú¶ ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ</div>

          <p>
            <strong>Pemberkatan:</strong> GPIB ATK, Gereja ‚Äî Sektor TambakRejo
          </p>
          <p><strong>Syukuran:</strong> Dusun Bejalan Timur RT 09 RW 04</p>

          <div class="actions">
            <button class="btn ghost" id="copyAddr">Salin Alamat</button>
            <button class="btn gold" id="openMapsCeremonyShort">
              Maps Pemberkatan
            </button>
            <button class="btn gold" id="openMapsReceptionShort">
              Maps Syukuran
            </button>
            <a class="btn ghost" href="tel:+62088">Call</a>
            <a
              class="btn ghost"
              href="https://wa.me/6285727945410"
              target="_blank"
              >WhatsApp</a
            >
          </div>
        </section>

        <section class="section reveal">
          <p style="text-align: center; font-size: 13px">
            Terima kasih atas doa & kehadiran Anda.
          </p>
        </section>
      </main>
    </div>

    <!-- Floating bar -->
    <div class="fab">
      <button id="fab-loc">üìç Lokasi</button>
      <button id="fab-rsvp" class="accent">‚úâ RSVP</button>
      <button id="fab-share">üîó Share</button>
      <!-- Music control button -->
      <button id="playMusicBtn" title="Play / Pause Music">üîà</button>
    </div>

    <!-- AUDIO: file berada di root repo, nama sesuai yang ada di GitHub -->
    <audio
      id="bg-music"
      src="waktu-yang-tepat-yesus.mp3"
      preload="metadata"
      loop
    ></audio>

    <script>
      /* ==========================
   Data Utama
   ========================== */
      const ceremonyDateISO = "2025-11-22T09:00:00+07:00";
      const calendarLocation = "GPIB ATK, Gereja ‚Äî Sektor TambakRejo";
      const receptionLocation = "Ikan Segar dan Kompoi Crispy Mak Toen";
      const waRSVP = "6285727945410"; // nomor kamu

      /* ==========================
   Splash
   ========================== */
      setTimeout(
        () => document.getElementById("splash").classList.add("hidden"),
        3500
      );

      /* ==========================
   Particles
   ========================== */
      const canvas = document.getElementById("particles"),
        ctx = canvas.getContext("2d");
      let W,
        H,
        particles = [];
      function resize() {
        W = canvas.width = innerWidth;
        H = canvas.height = innerHeight;
      }
      addEventListener("resize", resize);
      resize();

      function initParticles() {
        particles = [];
        let count = Math.max(12, Math.floor(W / 80));
        for (let i = 0; i < count; i++) {
          particles.push({
            x: Math.random() * W,
            y: Math.random() * H,
            r: Math.random() * 1.8 + 0.6,
            vx: (Math.random() - 0.5) * 0.15,
            vy: (Math.random() - 0.5) * 0.15,
            alpha: Math.random() * 0.7 + 0.2,
            drift: Math.random() * 0.6,
          });
        }
      }
      initParticles();

      function draw() {
        ctx.clearRect(0, 0, W, H);
        for (const p of particles) {
          p.x += p.vx + Math.sin((p.y + p.drift) / 60) * 0.02;
          p.y += p.vy + Math.cos((p.x + p.drift) / 60) * 0.02;
          if (p.x < -10) p.x = W + 10;
          if (p.x > W + 10) p.x = -10;
          if (p.y < -10) p.y = H + 10;
          if (p.y > H + 10) p.y = -10;
          const g = ctx.createLinearGradient(
            p.x - p.r,
            p.y - p.r,
            p.x + p.r,
            p.y + p.r
          );
          g.addColorStop(0, "rgba(217,183,126," + 0.02 * p.alpha + ")");
          g.addColorStop(1, "rgba(217,183,126," + 0.9 * p.alpha + ")");
          ctx.fillStyle = g;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          ctx.fill();
        }
        requestAnimationFrame(draw);
      }
      draw();

      /* ==========================
   Countdown
   ========================== */
      function upd() {
        const now = new Date(),
          target = new Date(ceremonyDateISO);
        let diff = target - now;
        if (diff <= 0) {
          cd("0", "0", "0");
          return;
        }
        let d = Math.floor(diff / (1000 * 60 * 60 * 24));
        diff -= d * (1000 * 60 * 60 * 24);
        let h = Math.floor(diff / (1000 * 60 * 60));
        diff -= h * (1000 * 60 * 60);
        let m = Math.floor(diff / (1000 * 60));
        cd(d, h, m);
      }
      function cd(a, b, c) {
        document.getElementById("cd-days").textContent = a;
        document.getElementById("cd-hours").textContent = b;
        document.getElementById("cd-minutes").textContent = c;
      }
      upd();
      setInterval(upd, 60000);

      /* ==========================
   ICS
   ========================== */
      function pad(n) {
        return String(n).padStart(2, "0");
      }
      function toIcs(d) {
        return (
          d.getUTCFullYear() +
          pad(d.getUTCMonth() + 1) +
          pad(d.getUTCDate()) +
          "T" +
          pad(d.getUTCHours()) +
          pad(d.getUTCMinutes()) +
          pad(d.getUTCSeconds()) +
          "Z"
        );
      }
      document.getElementById("addIcs").onclick = () => {
        const st = new Date(ceremonyDateISO),
          en = new Date(st.getTime() + 2 * 60 * 60 * 1000);
        const ics = `BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
DTSTART:${toIcs(st)}
DTEND:${toIcs(en)}
SUMMARY:Pemberkatan - Devano & Bernike
LOCATION:${calendarLocation}
END:VEVENT
END:VCALENDAR`;
        const url = URL.createObjectURL(
          new Blob([ics], { type: "text/calendar" })
        );
        const a = document.createElement("a");
        a.href = url;
        a.download = "event.ics";
        a.click();
        URL.revokeObjectURL(url);
      };

      /* ==========================
   Google Calendar
   ========================== */
      document.getElementById("addGCal").onclick = () => {
        const st = new Date(ceremonyDateISO),
          en = new Date(st.getTime() + 2 * 60 * 60 * 1000),
          f = (d) => d.toISOString().replace(/-|:|\.\d{3}/g, "");
        const url = `https://www.google.com/calendar/render?action=TEMPLATE&text=Pemberkatan+-+Devano+%26+Bernike&dates=${f(
          st
        )}/${f(en)}&location=${encodeURIComponent(calendarLocation)}`;
        window.open(url, "_blank");
      };

      /* ==========================
   Maps
   ========================== */
      function openMap(loc) {
        window.open(
          "https://www.google.com/maps/search/?api=1&query=" +
            encodeURIComponent(loc),
          "_blank"
        );
      }
      document.getElementById("openMapsCeremony").onclick = () =>
        openMap(calendarLocation);
      document.getElementById("openMapsReception").onclick = () =>
        openMap(receptionLocation);
      document.getElementById("openMapsCeremonyShort").onclick = () =>
        openMap(calendarLocation);
      document.getElementById("openMapsReceptionShort").onclick = () =>
        openMap(receptionLocation);

      /* ==========================
   RSVP WhatsApp (v2.5)
   ========================== */
      document.getElementById("sendWA").onclick = () => {
        const n = document.getElementById("name").value.trim();
        const p = document.getElementById("phone").value.trim();
        const a = document.getElementById("attend").value;
        const t = document.getElementById("note").value.trim();

        if (!n || !p) {
          alert("Nama & nomor WA wajib diisi.");
          return;
        }

        const msg = `RSVP ‚Äî Devano & Bernike
Nama: ${n}
Nomor: ${p}
Kehadiran: ${a}
Catatan: ${t}`;

        const url =
          "https://wa.me/" + waRSVP + "?text=" + encodeURIComponent(msg);
        window.open(url, "_blank");
      };

      /* ==========================
   Save local
   ========================== */
      document.getElementById("saveLocal").onclick = () => {
        let o = {
          name: name.value,
          phone: phone.value,
          attend: attend.value,
          note: note.value,
          t: Date.now(),
        };
        localStorage.setItem("rsvp-" + o.t, JSON.stringify(o));
        alert("Tersimpan di perangkat.");
      };

      /* ==========================
   Copy alamat
   ========================== */
      document.getElementById("copyAddr").onclick = async () => {
        const text = `Pemberkatan: ${calendarLocation}\nSyukuran: ${receptionLocation}`;
        try {
          await navigator.clipboard.writeText(text);
          alert("Alamat disalin.");
        } catch {
          prompt("Salin manual:", text);
        }
      };

      /* ==========================
   Floating Bar
   ========================== */
      document.getElementById("fab-loc").onclick = () =>
        lokasi.scrollIntoView({ behavior: "smooth" });
      document.getElementById("fab-rsvp").onclick = () =>
        rsvpForm.scrollIntoView({ behavior: "smooth" });
      document.getElementById("fab-share").onclick = async () => {
        const data = {
          title: "Undangan Devano & Bernike",
          text: "Undangan 22 Nov 2025",
          url: location.href,
        };
        if (navigator.share) {
          try {
            await navigator.share(data);
          } catch {}
        } else {
          try {
            await navigator.clipboard.writeText(location.href);
            alert("Link disalin.");
          } catch {
            prompt("Copy link:", location.href);
          }
        }
      };

      /* ==========================
   Music control
   ========================== */
      (function initMusic() {
        const audio = document.getElementById("bg-music");
        const btn = document.getElementById("playMusicBtn");

        // set initial icon based on audio state
        const updateIcon = () => {
          btn.textContent = audio && !audio.paused ? "üîä" : "üîà";
        };
        updateIcon();

        // toggle play/pause when button clicked
        btn.addEventListener("click", async () => {
          try {
            if (audio.paused) {
              await audio.play();
              btn.textContent = "üîä";
            } else {
              audio.pause();
              btn.textContent = "üîà";
            }
          } catch (err) {
            // play may fail if browser blocks it ‚Äî user can try again
            console.warn("Play failed:", err);
            alert("Klik lagi untuk memutar musik.");
          }
        });

        // try to play once on first user interaction (helps in some browsers)
        const tryPlayOnFirstGesture = async () => {
          document.removeEventListener("click", tryPlayOnFirstGesture);
          try {
            await audio.play();
            btn.textContent = "üîä";
          } catch (e) {
            // ignore ‚Äî user can manually press button
          }
        };
        document.addEventListener("click", tryPlayOnFirstGesture, {
          once: true,
        });

        // update icon when playback ends/starts
        audio.addEventListener("play", updateIcon);
        audio.addEventListener("pause", updateIcon);
      })();

      /* ==========================
   Reveal
   ========================== */
      const io = new IntersectionObserver(
        (e) => {
          e.forEach((x) => {
            if (x.isIntersecting) {
              x.target.classList.add("visible");
              io.unobserve(x.target);
            }
          });
        },
        { threshold: 0.12 }
      );
      document.querySelectorAll(".reveal").forEach((x) => io.observe(x));
    </script>
  </body>
</html>
